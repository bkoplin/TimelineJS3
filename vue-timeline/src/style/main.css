/*!
	Timeline JS 3 - Modern CSS with Native Nesting
	
	Designed and built by Zach Wise for the Northwestern University Knight Lab
	Converted to modern CSS with native nesting support
*/

/* Base Timeline Component */
.tl-timeline {
  @apply font-sans;

  /* Typography hierarchy */
  & h1, & h2, & h3, & h4, & h5, & h6 {
    @apply text-black;

    & small {
      @apply text-sm leading-4;
    }
  }

  & h1, & h2, & h3 {
    @apply text-2xl leading-7;

    & small {
      @apply text-xl leading-6;
    }
  }

  & h4, & h5, & h6 {
    @apply text-xl leading-6 mb-0;
  }

  & h2 {
    @apply mt-5 mb-1;

    &.tl-headline-title {
      @apply text-4xl leading-10;

      & small {
        @apply block mt-1 text-xl leading-6;
      }
    }
  }

  /* Text content */
  & p {
    @apply mt-1 mb-2 text-sm leading-relaxed text-gray-600;

    &.lead {
      @apply text-xl;
    }

    & a {
      @apply text-gray-600 underline;

      &:hover,
      &:focus {
        @apply text-red-600;
      }
    }
  }

  /* Text formatting */
  & b, & strong {
    @apply font-bold;
  }

  & i, & em {
    @apply italic;
  }

  /* Links */
  & a {
    @apply no-underline text-red-600;

    &:hover {
      @apply underline text-red-800;
    }
  }

  /* Component-specific elements */
  & .tl-caption,
  & .tl-credit,
  & .tl-slidenav-next,
  & .tl-slidenav-previous {
    @apply text-xs leading-3;

    & a {
      @apply text-black;
    }
  }

  & .tl-makelink {
    @apply break-all;
    word-break: break-word;
    hyphens: auto;
  }

  /* Blockquotes */
  & blockquote {
    @apply m-2 font-serif text-gray-400 text-xl leading-6 text-left bg-transparent border-0 p-0;

    & p {
      @apply m-0;
    }

    & cite {
      @apply font-sans text-xs text-gray-600 block text-right;
      font-style: normal;
    }
  }

  /* VCard component */
  & .vcard {
    @apply font-sans text-sm leading-4 mb-4 mt-2;

    &::before,
    &::after {
      @apply table;
      content: "";
    }

    &::after {
      @apply clear-both;
    }

    & .twitter-date {
      @apply text-left text-xs;
    }

    & .author {
      @apply float-right;
    }

    & a {
      @apply text-gray-800 no-underline;

      &:hover {
        @apply no-underline;

        & .fn,
        & .nickname {
          @apply text-red-600;
        }
      }
    }

    & .fn,
    & .nickname {
      @apply pl-10;
    }

    & .fn {
      @apply block font-bold;
    }

    & .nickname {
      @apply mt-0.5 block text-gray-600;
    }

    & .avatar {
      @apply float-left block w-8 h-8;

      & img {
        @apply rounded;
      }
    }
  }

  /* Text content */
  & .tl-text {
    & ul {
      @apply p-0 pl-8 m-0;

      & li {
        @apply mb-1;
      }
    }
  }

  /* Call to action button */
  & .tl-button-calltoaction {
    @apply cursor-pointer font-bold pt-2 mb-2 pb-2;

    & .tl-button-calltoaction-text {
      @apply inline-block bg-red-600 text-white py-2 px-4 rounded;
    }
  }
}

/* Timeline Navigation Component */
.tl-timenav {
  @apply relative w-full h-full overflow-hidden;
  user-select: none;

  & .tl-timenav-line {
    @apply absolute w-full z-10;
    background-color: #cccccc;
    height: 1px;
    top: 50%;
    pointer-events: none;

    &::before,
    &::after {
      @apply table;
      content: "";
    }

    &::after {
      @apply clear-both;
    }

    &::before {
      @apply absolute w-2 h-2 bg-gray-300 rounded-full left-0;
      top: 50%;
      transform: translateY(-50%);
    }

    &::after {
      @apply absolute w-2 h-2 bg-gray-300 rounded-full right-0;
      top: 50%;
      transform: translateY(-50%);
    }
  }

  & .tl-timenav-slider {
    @apply relative w-full h-full;

    &.tl-timenav-slider-animate {
      @apply transition-transform duration-1000 ease-in-out;
    }

    & .tl-timenav-slider-background {
      @apply absolute w-full h-full bg-white;
    }

    & .tl-timenav-container-mask {
      @apply relative w-full overflow-hidden;

      & .tl-timenav-container {
        @apply relative w-full h-full;

        & .tl-timenav-item-container {
          @apply relative w-full h-full;
        }
      }
    }
  }
}

/* Time Axis Components */
.tl-timeaxis-background {
  @apply relative w-full bg-white z-20;
  border-top: 1px solid #cccccc;
  height: 60px;
}

.tl-timeaxis {
  @apply absolute w-full h-full overflow-hidden bg-white z-30;
  border-bottom: 1px solid #cccccc;

  & .tl-timeaxis-content-container {
    @apply relative w-full h-full;

    & .tl-timeaxis-major,
    & .tl-timeaxis-minor {
      @apply absolute h-full w-full;
    }
  }
}

/* Time Axis Tick Components */
.tl-timeaxis-tick {
  @apply absolute h-full;
  border-left: 1px solid #cccccc;
  pointer-events: none;

  &-label {
    @apply absolute text-xs text-gray-600 whitespace-nowrap;
    top: 5px;
    left: 5px;
    pointer-events: none;
  }

  &-major {
    border-left-color: #999999;
    border-left-width: 2px;

    & .tl-timeaxis-tick-label {
      @apply font-bold text-gray-800;
    }
  }

  &-minor {
    border-left-color: #eeeeee;
  }
}

/* Animation classes */
.tl-timeaxis-animate {
  & .tl-timeaxis-tick {
    @apply transition-transform duration-1000 ease-in-out;
  }
}

/* Timeline Marker Component */
.tl-timemarker {
  @apply absolute cursor-pointer;
  user-select: none;

  &-active {
    @apply z-30;
  }

  & .tl-timemarker-content-container {
    @apply relative w-full h-full;

    & .tl-timemarker-content {
      @apply absolute w-full bg-white border border-gray-300 rounded shadow-sm;
      min-height: 60px;

      &:hover {
        @apply border-red-600 shadow-md;
      }

      & .tl-timemarker-text {
        @apply p-2;

        & h2 {
          @apply text-sm font-bold text-black leading-4 m-0 mb-1;
        }

        & p {
          @apply text-xs text-gray-600 leading-3 m-0;
        }
      }
    }
  }
}

/* Timeline Media Component */
.tl-media {
  @apply relative w-full h-full overflow-hidden;

  & .tl-media-content-container {
    @apply relative w-full h-full;
  }

  & img {
    @apply max-w-full h-auto;
  }
}

/* Timeline Era Component */
.tl-timeera {
  @apply absolute bg-opacity-20 bg-blue-200 border-l-2 border-blue-400;
  pointer-events: none;

  & .tl-timeera-content {
    @apply absolute text-xs text-blue-800 font-medium p-1;
    top: 2px;
    left: 4px;
  }
}

/* Responsive Design */
@media (max-width: 768px) {
  .tl-timeline {
    & h1, & h2, & h3 {
      @apply text-xl leading-6;
    }

    & h2.tl-headline-title {
      @apply text-2xl leading-7;
    }

    & p {
      @apply text-xs;
    }
  }

  .tl-timenav {
    @apply text-sm;
  }

  .tl-timeaxis-tick-label {
    @apply text-2xs;
  }
}

/* Dark Theme Support */
@media (prefers-color-scheme: dark) {
  .tl-timeline {
    @apply text-white;

    & h1, & h2, & h3, & h4, & h5, & h6 {
      @apply text-white;
    }

    & p {
      @apply text-gray-300;
    }
  }

  .tl-timenav {
    & .tl-timenav-slider {
      & .tl-timenav-slider-background {
        @apply bg-gray-900;
      }
    }
  }

  .tl-timeaxis {
    @apply bg-gray-900;

    &-background {
      @apply bg-gray-900;
    }

    &-tick {
      border-left-color: #444444;

      &-major {
        border-left-color: #666666;

        & .tl-timeaxis-tick-label {
          @apply text-gray-200;
        }
      }

      &-minor {
        border-left-color: #333333;
      }

      &-label {
        @apply text-gray-400;
      }
    }
  }

  .tl-timemarker {
    & .tl-timemarker-content-container {
      & .tl-timemarker-content {
        @apply bg-gray-800 border-gray-600;
      }
    }
  }
}
